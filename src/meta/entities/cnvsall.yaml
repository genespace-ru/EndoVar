cnvsall:
  type: table
  displayName: ALL CNV 
  order: '60'
  primaryKey: ID
  scheme:                                 
    columns:
    - ID:
        type: KEYTYPE
        autoIncrement: true
        primaryKey: true
        doc: CNV internal identifier.
    - gene:
        type: VARCHAR(20)
        doc: Genes affected by variation
    - status:
        type: VARCHAR(20)
        doc: Copy number loss/ Copy number gain
    - Chrom:
        type: VARCHAR(20)
        doc: Chromosome number
    - band:
        type: VARCHAR(20)
        doc: band
    - seq_start:
        type: VARCHAR(20)
        doc: start of CNV
    - seq_end:
        type: VARCHAR(20)
        doc: end of CNV
    - Positions:
        type: VARCHAR(30)
        doc: coordinates of CNV
    - diagnosis:
        type: VARCHAR(20)
        doc: ICD10 code of patient' diagnosis
    - Pathogenicity:
        type: VARCHAR(50)
        canBeNull: true
        doc: interpretation of the pathogenicity score
    - Newly_discovered:
        type: VARCHAR(20)
        doc: is CNV are previously reported in Clinvar?
    - clinvar_cnvs_ids:
        type: VARCHAR(1000)
        canBeNull: true
        doc: Variant Call ID in dbVAR
    - clinvar_cnvs_phenotypes:
        type: VARCHAR(1000)
        canBeNull: true
        doc: Subject phenotype
    - clinvar_cnvs_type:
        type: VARCHAR(1000)
        canBeNull: true
        doc: variant type
    - clinvar_cnvs_clin_int:
        type: VARCHAR(1000)
        canBeNull: true
        doc: Clinical interpretation of the copy-number variant by submitters       
    - pat_score:
        type: VARCHAR(100)
        doc: computed score    
    - pat_status:
        type: VARCHAR(1000)
        doc: Interpretation of pathogenicity score      
    - pat_gene:
        type: VARCHAR(1000)
        doc: Gene with maximum pathogenicity            
    - samp_id:
        type: VARCHAR(50)
        doc: Patient ID   
    - genes:
        type: VARCHAR(2000)  
        doc: list of genes involved in CNV

  queries:

    - '*** Selection view ***':
        type: 1D
        roles: '@AllRoles'
        code: |
            SELECT 
                ID,
                pat_gene,
                status,
                seg_start
            FROM cnvsall 

    #- ChromosomeSelectionView:
     #   type: 1D_unknown
      #  code: |-
      ##    SELECT 
       #     chr,
      #      chr
       #   FROM CNVs
      #    GROUP BY chr
      #    ORDER BY chr

    - All records:
        type: 1D
        roles: '@AllRoles'
      #  layout: '{"topForm":"CNVFilter", "quickType":"select"}'
        layout: '{"quickType":"select"}'
      #  operations:
      #  - CNVFilter
        code: |
            SELECT 
                pat_gene,
                Genes AS "All genes;<quick visible='true' />",
                Chrom AS "Chr",
                seq_start AS "Start",
                seq_end AS "End",
                Positions AS "Positions;<quick visible='true' />",
                status,
                diagnosis AS "Patient's diagnosis code;<quick visible='true' />",
                pat_status AS "Pathogenicity;<quick visible='true' />",
                Newly_discovered AS "Newly_discovered;<quick visible='true' />",
                clinvar_cnvs_ids AS "dbVar Variant Call ID;<quick visible='true' />",
                clinvar_cnvs_type AS "dbVar CNV type;<quick visible='true' />",
                clinvar_cnvs_phenotypes AS "dbVar associated phenotype;<quick visible='true' />",
                clinvar_cnvs_clin_int AS "Clinical interpretation;<quick visible='true' />",
            FROM cnvsall
         #   WHERE (1=1)
         #   <if parameter="gene">
          #      AND gene = '<parameter:gene/>'
         #   </if>
         #   <if parameter="chr">
         #       AND chr = '<parameter:chr/>'
          #  </if>

           # ORDER BY CHR
  #  - Card:
   #     layout: '{"tableBox":"cnv", "mode":"named", "hideTitle":"true"}'
   #     invisible: true
   #     roles: "@AllRoles"
   #     code: |-
   #         SELECT
    #            ID AS "ID"
    #        FROM cnvs

  #  - Info:
  #      roles: "@AllRoles"
   #     layout: '{"tableBox":"cnvInfo", "mode":"named", "filterUI":"no", "hideTitle":"true"}'
   ##     invisible: true
  #      code: |-
   #         SELECT
   #             gene,
   #             Positions AS "P",
   #             ICD10 AS "I",
  #              Newly_discovered AS "Ne",
   #             Pathogenicity AS "Pathogenicity",
   #             status,
    #            band
    #        FROM cnvs
#    - Card:
 #       layout: '{"tableBox":"gene", "mode":"named", "hideTitle":"true"}'
 #       invisible: true
  #      roles: "@AllRoles"
  #      code: |-
  #          SELECT
  #              ID AS "ID"
  #          FROM genes

 #   - Info:
  #      roles: "@AllRoles"
  #      layout: '{"tableBox":"geneInfo", "mode":"named", "filterUI":"no", "hideTitle":"true"}'
  #      invisible: true
  #      code: |-
  #          SELECT
   #             name
   #         FROM genes

#  operations:
 # - CNVFilter:
  #    type: Groovy
   #   roles: '@AllRoles'
   #   file: operations.filters.CNVFilter.groovy
